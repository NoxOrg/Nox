@namespace Nox.Ui.Blazor.Lib.Components.NoxTypes
@using MudBlazor
@using Nox.Ui.Blazor.Lib.Models

<MudForm @ref="AddMinimumCashStockEntityForm" @bind-IsValid="@AddMinimumCashStockValidateSuccess">
    <MudGrid Style="margin-bottom:13px;">
        <MudItem xs="5">
            <MudSelect Label="@TitleCurrency"
                       Variant="Variant.Outlined"
                       FullWidth="true"
                       Clearable="true"
                       TextChanged="OnCurrencyIdChanged"
                       Value="@CurrentCurrencyIdStr">
                @foreach (CurrencyModel item in CurrencySelectionList)
                {
                    if (!string.IsNullOrEmpty(item.Id)
                    && !string.IsNullOrWhiteSpace(item.Name))
                    {
                        <MudSelectItem Value="@item.Id">@item.Name</MudSelectItem>
                    }                    
                }
            </MudSelect>
        </MudItem>
        <MudItem xs="5">
            <MudNumericField Label="@TitleAmount"
                             Variant="Variant.Outlined"
                             FullWidth="true"
                             Clearable="true"
                             MaxLength="63"
                             TextChanged="OnAmountChanged"
                             Format="@Format"
                             Disabled="IsDisabled"
                             Adornment="Adornment.Start"
                             AdornmentText="@DisplayCurrencySymbol"
                             Min="0"
                             Value="Amount" />
        </MudItem>
        <MudItem xs="2">
            <MudButton OnClick="@(async () => await AddItem())"
                       Variant="Variant.Filled"
                       Color="Color.Info"
                       Style="margin-top:15px;">
                <MudText>ADD</MudText>
            </MudButton>
        </MudItem>
    </MudGrid>
</MudForm>

<MudDataGrid Items="@MoneyList" Loading="IsLoading">
    <Columns>
        <PropertyColumn Property="x => x.CurrencyCode.ToString()" Title="@TitleCurrency" />
        <PropertyColumn Property="x => x.Amount" Title="@TitleAmount" />
        <TemplateColumn CellClass="d-flex justify-end">
            <CellTemplate>
                <MudStack Row>
                    <MudIconButton OnClick="@(async() => await RemoveItem(@context.Item))" Color="@Color.Default" Icon="@Icons.Material.Filled.Delete" />
                </MudStack>
            </CellTemplate>
        </TemplateColumn>
    </Columns>
    <NoRecordsContent>
        Currently Empty
    </NoRecordsContent>
</MudDataGrid>