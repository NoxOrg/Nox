@using Nox.Ui.Blazor.Lib.Components.Generic
@using Nox.Ui.Blazor.Lib.Services
@using Cryptocash.Ui.Forms.Add
@using Cryptocash.Ui.DataGrid

@namespace Cryptocash.Ui.Pages

@page "/MinimumCashStocks"

@inject ApplicationState AppState
@{
    AppState.PageTitle = "MinimumCashStocks";
}

<MudText>MinimumCashStocks</MudText>

<MudGrid Spacing="0">
    <MudItem xs="12">
        <MudText>Search section</MudText>
    </MudItem>
    <MudItem xs="12">
        <Actions OnClick="ShowAddDialog" />
    </MudItem>
    <AddMinimumCashStockForm @bind-IsVisible="showAddDialog" OnSubmit="AddMinimumCashStockSubmit" OnCancel="HideAddDialog" />
    <MudItem xs="12">
        <MinimumCashStocksDataGrid @ref="referencedDataGrid" />
    </MudItem>
</MudGrid>

@code{
#region ADD
    private bool showAddDialog = false;
    private MinimumCashStocksDataGrid? referencedDataGrid;

    private void ShowAddDialog()
    {
        showAddDialog = true;
    }

    private void HideAddDialog()
    {
        showAddDialog = false;
    }

    private void AddMinimumCashStockSubmit()
    {
        showAddDialog = false;        
        referencedDataGrid?.RefreshDataGrid();
    }
#endregion ADD
}