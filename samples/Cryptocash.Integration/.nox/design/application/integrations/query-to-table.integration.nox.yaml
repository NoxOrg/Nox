#
# SampleSync.integration.nox.yaml
#
# yaml-language-server: $schema=../../../../../schemas/integration.json
#

name: SampleQueryToTableSync

description: Synchronization of Country data from a sample sql database table using a query statement, to a Nox entity store database table.

mergeType: mergeNew

schedule:
  start: Every week on Sunday at 3am
  runOnStartup: true

source:
  name: SampleSource
  description: Curated dataset of country information.
  dataConnectionName: CountrySource
  watermark:
    sequentialKeyColumns:
      - Id
    dateColumns: 
      - CreateDate
      - EditDate
  
  
  sourceAdapterType: databaseQuery
  
  queryOptions:
    query: SELECT CountryId, Name, Population, CreateDate, EditDate FROM dbo.CountryMaster
    minimumExpectedRecords: 10

transformationType: customTransform

target:
  name: SampleTarget
  description: The country table of the Cryptocash database
  dataConnectionName: CryptocashEtlDb
  targetAdapterType: databaseTable
  tableOptions:
    tableName: Countries
    watermark:
      sequentialKeyColumns: 
        - Id
      dateColumns: 
        - CreateDate
        - EditDate

